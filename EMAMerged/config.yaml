# === EMAMerged/config.yaml ===

# DATA / SESSION
timezone: "US/Eastern"
rth_only: true
rth_start: "09:30"
rth_end:   "15:55"
feed: "iex"
timeframe: "5Min"        # live cadence
history_days: 30
bar_limit: 500

# ENTRY WINDOWS (local time)
entry_windows:
  - { start: "09:35", end: "12:00" }
  - { start: "13:00", end: "15:45" }

# Near close guard: block NEW entries within last N minutes before rth_end
no_new_entries_last_min: 10

# CORE STRATEGY
ema_fast: 9
ema_slow: 21
atr_period: 14

# FILTERS (all must pass to enter long)
filters:
  enabled: true

  # ADX / DI
  adx_len: 14
  adx_threshold: 22
  require_plus_di_over_minus: true
  di_margin: 0

  # RSI
  rsi_period: 14
  rsi_min: 50
  rsi_max: 80

  # EMA slope
  slope_mode: "percent"        # "percent" or "atr"
  slope_lookback: 3
  slope_threshold_pct: 0.0012  # 12 bps (0.12%)
  slope_threshold_atr: 0.15
  require_ema21_slope_up: true

  # Optional anti-whipsaw
  ema_separation_bps: 0.0

# POSITION / RISK
allow_shorts: false
qty: 1                        # ALWAYS 1 share per entry
max_notional_per_trade: 2000  # skip entries if price > $2,000

# Brackets (enable to place stop/TP immediately on entry)
brackets:
  enabled: true
  atr_mult_sl: 1.2            # SL distance ~ 1.2 * ATR
  take_profit_r: 1.0          # TP at +1R (R = entry - stop distance)
  submit_as: "bracket"        # Alpaca bracket order class

# OUTPUT
results_dir: "results"
